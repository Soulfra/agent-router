# ğŸ“ CALOS Learning Platform - CryptoZombies Style

**Status:** âœ… FULLY IMPLEMENTED

A gamified learning platform across 12 branded domains with progressive lessons, daily mini-games, drip campaigns, and achievements. Inspired by CryptoZombies.

---

## ğŸ¯ What Is This?

Transform your 12-domain portfolio into an educational powerhouse where users learn by doing:

- **Progressive Lessons** - CryptoZombies-style step-by-step learning
- **Domain-Specific Paths** - Each of your 12 domains teaches unique skills
- **Daily Mini-Games** - Wordle-style challenges generated by Triangle Consensus
- **XP & Levels** - Gamification with achievements and leaderboards
- **Drip Campaigns** - Automated email/SMS onboarding and engagement
- **Streaks** - Daily completion tracking to build habits

### The 12 Learning Domains

| Domain | Focus | Icon | Lessons |
|--------|-------|------|---------|
| **soulfra.com** | Infrastructure & DevOps | ğŸ—ï¸ | 10 |
| **deathtodata.com** | Data Engineering & Data Literacy | ğŸ’€ | 15 |
| **finishthisidea.com** | Product Execution | ğŸš€ | 8 |
| **botchcraft.com** | Bot Building | ğŸ¤– | 10 |
| **perfectshrugs.com** | Minimalist Design | ğŸ¤· | 8 |
| **makeitstartup.com** | Startup Fundamentals | ğŸ’¼ | 10 |
| **calconsult.com** | AI Consulting | ğŸ§  | 10 |
| **ralphdesignschool.com** | Design Systems | ğŸ¨ | 10 |
| **mauercorp.com** | Enterprise Architecture | ğŸ¢ | 12 |
| **aistreetjournal.com** | AI Journalism | ğŸ“° | 8 |
| **techpanionship.com** | Tech Mentorship | ğŸ¤ | 10 |
| **votevalence.com** | Voting Systems | ğŸ—³ï¸ | 10 |

---

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database Layer (PostgreSQL)                            â”‚
â”‚  - learning_paths, lessons, user_progress              â”‚
â”‚  - achievements, mini_games, drip_campaigns            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Business Logic Layer                                   â”‚
â”‚  - LearningEngine (lib/learning-engine.js)             â”‚
â”‚  - MiniGameGenerator (lib/mini-game-generator.js)      â”‚
â”‚  - DripCampaignManager (lib/drip-campaign-manager.js)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Layer (Express)                                    â”‚
â”‚  - Learning Routes (routes/learning-routes.js)         â”‚
â”‚  - RESTful endpoints for all operations                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (Future)                                      â”‚
â”‚  - Landing pages per domain                             â”‚
â”‚  - Lesson viewer with code challenges                   â”‚
â”‚  - Daily mini-game UI                                   â”‚
â”‚  - Leaderboards & achievement showcase                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Components

**1. LearningEngine (`lib/learning-engine.js`)**
- Handles enrollment, progress tracking, lesson completion
- Calculates XP, levels, streaks
- Unlocks achievements
- Integrates with Triangle Consensus for lesson content

**2. MiniGameGenerator (`lib/mini-game-generator.js`)**
- Generates daily Wordle-style games using AI
- 10 game types: CodeOrdle, API Battle, Pattern Match, Debug Hunt, Syntax Master, Data Cleaner, Breach Hunter, Record Matcher, OSINT Detective, Identity Verifier
- Domain-specific educational content
- Triangle Consensus ensures quality puzzles

**3. DripCampaignManager (`lib/drip-campaign-manager.js`)**
- Email/SMS automation based on triggers
- SendGrid, Mailgun, Twilio integration
- Open/click/conversion tracking
- Template rendering with user context

**4. Learning Routes (`routes/learning-routes.js`)**
- RESTful API for all learning operations
- Enrollment, progress, lessons, games, leaderboards
- Admin endpoints for daily tasks

---

## ğŸš€ Setup Guide

### Step 1: Run Database Migration

```bash
psql $DATABASE_URL -f migrations/020_learning_platform.sql
```

This creates all necessary tables:
- `learning_paths`, `lessons`
- `user_progress`, `lesson_completions`
- `achievements`, `user_achievements`
- `mini_games`, `mini_game_attempts`
- `drip_campaigns`, `drip_messages`, `drip_sends`

### Step 2: Seed Learning Paths

```bash
node scripts/seed-learning-paths.js
```

This creates:
- 12 learning paths (one per domain)
- 106 total lessons across all paths
- 15 universal achievements

### Step 3: Configure Email/SMS (Optional)

```bash
# Add to .env
EMAIL_PROVIDER=sendgrid  # or mailgun, smtp, console
EMAIL_API_KEY=your_api_key
EMAIL_FROM_ADDRESS=noreply@calos.ai
EMAIL_FROM_NAME=CALOS Learning

# For SMS (optional)
SMS_ENABLED=true
TWILIO_ACCOUNT_SID=your_sid
TWILIO_AUTH_TOKEN=your_token
TWILIO_PHONE_NUMBER=+1234567890
```

### Step 4: Wire Learning Routes into Router

Edit `router.js`:

```javascript
const LearningEngine = require('./lib/learning-engine');
const MiniGameGenerator = require('./lib/mini-game-generator');
const DripCampaignManager = require('./lib/drip-campaign-manager');
const createLearningRoutes = require('./routes/learning-routes');

// Initialize (after db and triangleEngine are set up)
const learningEngine = new LearningEngine(db);
const miniGameGenerator = new MiniGameGenerator(db, triangleEngine);
const dripCampaignManager = new DripCampaignManager(db);

// Mount routes
app.use('/api/learning', createLearningRoutes({
  db,
  learningEngine,
  miniGameGenerator,
  dripCampaignManager
}));
```

### Step 5: Start Server

```bash
npm run start
```

Look for:
```
[LearningEngine] Initialized
[MiniGameGenerator] Initialized
[DripCampaignManager] Initialized (Email: sendgrid, SMS: enabled)
```

### Step 6: Setup Cron Jobs (Production)

```bash
# Generate daily mini-games (run at midnight)
0 0 * * * curl -X POST http://localhost:5001/api/learning/admin/generate-daily-games

# Process drip campaign sends (run every minute)
* * * * * curl -X POST http://localhost:5001/api/learning/admin/process-drip-sends
```

---

## ğŸ’¡ How It Works

### User Journey: Learning Soulfra Infrastructure

**1. User Discovers soulfra.com**
```
Landing page: "Master Infrastructure-as-Code with Soulfra"
CTA: "Start Learning" â†’ Enroll endpoint
```

**2. User Enrolls**
```bash
POST /api/learning/enroll
{
  "userId": "user_123",
  "pathSlug": "soulfra-mastery"
}
```

Response:
```json
{
  "success": true,
  "enrollment": {
    "progress_id": "uuid-...",
    "total_xp_earned": 0,
    "current_streak_days": 0,
    "completion_percentage": 0
  }
}
```

**Triggers:** Welcome drip campaign email sent!

**3. User Gets First Lesson**
```bash
GET /api/learning/next-lesson/user_123/soulfra-mastery
```

Response:
```json
{
  "success": true,
  "nextLesson": {
    "lesson_id": "uuid-...",
    "lesson_number": 1,
    "lesson_title": "Introduction to Infrastructure as Code",
    "xp_reward": 100,
    "challenge_prompt": "Build a simple Terraform config..."
  }
}
```

**4. User Completes Lesson**
```bash
POST /api/learning/complete-lesson
{
  "userId": "user_123",
  "lessonId": "uuid-...",
  "score": 95,
  "timeSpentMinutes": 12
}
```

Response:
```json
{
  "success": true,
  "message": "Lesson completed! +100 XP",
  "xp_awarded": 100,
  "progress": {
    "total_xp_earned": 100,
    "current_level": 1,
    "current_streak_days": 1,
    "completion_percentage": 10.00
  }
}
```

**Unlocked:** "First Step" achievement! ğŸ“

**5. User Plays Daily Mini-Game**
```bash
GET /api/learning/mini-game/today/soulfra-mastery
```

Response (CodeOrdle example):
```json
{
  "success": true,
  "game": {
    "game_id": "uuid-...",
    "game_type": "codeordle",
    "game_title": "CodeOrdle: Soulfra",
    "game_description": "Guess the 5-letter coding term! Temporary storage to speed up data retrieval",
    "game_data": {
      "hint": "Temporary storage to speed up data retrieval",
      "maxAttempts": 6
    }
  }
}
```

**6. User Attempts Game**
```bash
POST /api/learning/mini-game/attempt
{
  "userId": "user_123",
  "gameId": "uuid-...",
  "attemptData": {
    "guess": "CACHE"
  }
}
```

Response:
```json
{
  "success": true,
  "message": "Correct! +50 XP",
  "xp_awarded": 50
}
```

**7. User Checks Leaderboard**
```bash
GET /api/learning/leaderboard/soulfra-mastery?limit=10
```

Response:
```json
{
  "success": true,
  "leaderboard": [
    { "rank": 1, "user_id": "user_456", "total_xp": 1200, "current_level": 3 },
    { "rank": 2, "user_id": "user_123", "total_xp": 150, "current_level": 1 }
  ]
}
```

---

## ğŸ® Mini-Game Types

### Classic Game Types

#### 1. CodeOrdle
Like Wordle but for coding terms. Guess the 5-letter word in 6 tries.

**Example:**
```
Solution: FETCH
Hint: "JavaScript method to make HTTP requests"

User guesses: CACHE â†’ â¬œï¸ğŸŸ¨â¬œï¸ğŸŸ¨â¬œï¸
User guesses: FETCH â†’ ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ© âœ…
```

#### 2. API Battle
Identify which AI provider (OpenAI, Anthropic, DeepSeek) wrote which response.

**Example:**
```
Question: "Explain async/await in JavaScript"

Response A: [OpenAI's answer]
Response B: [Anthropic's answer]
Response C: [DeepSeek's answer]

Match each provider to their response!
```

#### 3. Pattern Match
Fill in the blank to complete the code pattern.

**Example:**
```javascript
const data = await fetch(url)
const json = await data.{{BLANK}}()

Options: [json, parse, stringify, text]
Answer: json
```

#### 4. Debug Hunt
Find the bug in the code snippet.

**Example:**
```javascript
1: function fetchUser(id) {
2:   const user = await getUser(id)  â† Bug here!
3:   return user
4: }

What's wrong with line 2?
Answer: Missing 'async' keyword on function
```

#### 5. Syntax Master
Fix multiple syntax errors in one line of code.

**Example:**
```javascript
Broken: const users = await db.query('SELECT * FROM users WHERE id = ' + userId
Fixed:  const users = await db.query('SELECT * FROM users WHERE id = $1', [userId])

Errors found:
- Missing closing parenthesis
- SQL injection vulnerability
- Missing parameter array
```

### Data Literacy Game Types

#### 6. Data Cleaner
Normalize messy real-world data (ZIP codes, phone numbers, addresses, names).

**Example:**
```
Clean these 5 messy records:

1. ZIP: "2134" â†’ "02134" (add leading zero)
2. Phone: "5551234567" â†’ "(555) 123-4567" (format)
3. Address: "123 main st" â†’ "123 Main Street" (standardize)
4. Name: "JOHN DOE" â†’ "John Doe" (fix case)
5. Email: "User@Example.COM" â†’ "user@example.com" (lowercase)

Pass with 80% accuracy (4/5 correct)
```

#### 7. Breach Hunter
Learn privacy techniques using email tagging (+tags) to track data breaches.

**Example:**
```
You created these tagged emails:
- user+amazon@gmail.com
- user+facebook@gmail.com
- user+sketchy-site@gmail.com

You're receiving spam at:
- user+amazon@gmail.com
- user+sketchy-site@gmail.com

Which services leaked your email?
Answer: Amazon, Sketchy Site
```

#### 8. Record Matcher
Fuzzy matching for duplicate detection (identity resolution).

**Example:**
```
Group these records by person:

1. John Smith, 123 Main St, john@email.com
2. Jon Smith, 123 Main Street, john@email.com
3. Jane Doe, 456 Oak Ave, jane@email.com
4. J. Smith, 123 Main St., john.smith@email.com

Groups:
- Person A: Records 1, 2, 4 (same person)
- Person B: Record 3 (different person)

Pass with 80% accuracy on grouping
```

#### 9. OSINT Detective
Discover linked information from partial data (like IP + geo + email).

**Example:**
```
Starting clues:
- IP: 192.168.1.1 (San Francisco, CA)
- Email: j***@example.com
- Phone: (555) ***-1234

Discover:
- Full name from email lookup
- Full phone number from reverse search
- Address from IP geolocation
- Social media profiles from cross-referencing

Pass with 60% discovery rate
```

#### 10. Identity Verifier
Verification questions like credit bureaus ask (learning how data aggregation works).

**Example:**
```
Which of these addresses did you live at?
A) 123 Main St, Boston MA
B) 456 Oak Ave, Seattle WA
C) 789 Pine Rd, Austin TX
D) None of the above

Which car did you own in 2018?
A) Honda Civic
B) Toyota Camry
C) Ford F-150
D) I didn't own a car

Pass with 80% correct answers (4/5)
```

---

## ğŸ¤ Collaborative Hint System

Students can help each other by leaving cryptic hints using emojis, icons, and leet speak (l33t). This builds a collaborative learning culture while preventing spoilers.

### How It Works

**1. Student Leaves Hint**
When stuck on a lesson, students can view hints from other students. Students who understand the lesson can leave helpful (but cryptic!) hints.

**2. Hint Types**
- `cryptic` - Emojis and symbols only (ğŸ”¥ğŸš€ğŸ’¡)
- `direct` - Clear guidance without giving away answer
- `code_snippet` - Small code example
- `icon_only` - Pure visual hints

**3. Spoiler Levels (1-5)**
- Level 1: Very cryptic, requires thinking
- Level 2-3: Moderate hints
- Level 4: Almost gives it away
- Level 5: Spoiler! (loses XP, gets hidden if reported)

**4. XP Economy**
- Upvoted hint: +5 XP (max 50 XP per hint)
- 3+ downvotes: Hint gets hidden
- Leaderboard for most helpful hint-givers

**5. Domain-Scoped**
Soulfra students see Soulfra hints. DeathToData students see DeathToData hints. Each domain has its own collaborative community.

### Example Hint Flow

**Lesson:** "Data Normalization: ZIP Codes"

**Student A leaves hint:**
```
Hint: "ğŸ”¢ + 0ï¸âƒ£ = ğŸ—ºï¸ w0rk5"
Type: cryptic
Spoiler Level: 2
```

**Student B upvotes:** +5 XP to Student A

**Student C leaves better hint:**
```
Hint: "Think about what makes 02134 different from 2134 in Massachusetts ğŸ›ï¸"
Type: direct
Spoiler Level: 3
```

**Student D upvotes:** +5 XP to Student C

**Student E leaves spoiler:**
```
Hint: "Just add a leading zero to ZIP codes under 10000"
Type: direct
Spoiler Level: 5 (too much!)
```

**Multiple students downvote:** Hint hidden after 3 reports

### Hint Leaderboard

Top hint-givers across all lessons:

| Rank | User | Total Hints | Helpfulness Score | XP Earned |
|------|------|-------------|-------------------|-----------|
| 1 | user_crypto_wizard | 47 | 182 | 850 |
| 2 | user_data_guru | 38 | 156 | 730 |
| 3 | user_code_ninja | 29 | 94 | 420 |

---

## ğŸ† XP & Progression System

### XP Sources
- Complete lesson: 80-250 XP (varies by difficulty)
- Daily mini-game: 50-80 XP
- Unlock achievement: 25-2000 XP
- Streak bonuses: +10% per day

### Level Formula
```
Level = floor(sqrt(total_xp / 100))

Examples:
- 100 XP   â†’ Level 1
- 400 XP   â†’ Level 2
- 900 XP   â†’ Level 3
- 2500 XP  â†’ Level 5
- 10000 XP â†’ Level 10
```

### Streaks
- Complete at least 1 lesson per day to maintain streak
- Streak resets if you skip a day
- Streak achievements at 3, 7, 30, 100 days

### Achievements

| Achievement | Requirement | Rarity | XP |
|-------------|-------------|--------|-----|
| First Step | Complete 1 lesson | Common | 50 |
| Dedicated Learner | Complete 10 lessons | Uncommon | 100 |
| Rising Star | Reach level 5 | Uncommon | 100 |
| Expert | Reach level 10 | Rare | 250 |
| Master | Reach level 25 | Epic | 500 |
| Legend | Reach level 50 | Legendary | 1000 |
| 3-Day Streak | 3 days in a row | Common | 50 |
| Week Warrior | 7 days in a row | Uncommon | 150 |
| Monthly Master | 30 days in a row | Rare | 500 |
| Century Streak | 100 days in a row | Legendary | 2000 |
| Path Completed | Finish entire path | Epic | 500 |
| Speed Demon | Complete lesson < 5 min | Rare | 150 |

---

## ğŸ“§ Drip Campaign System

### Campaign Triggers

| Trigger Event | When It Fires | Use Case |
|---------------|---------------|----------|
| `user_enrolled` | User enrolls in path | Welcome email |
| `lesson_completed` | User completes lesson | Encouragement + next lesson preview |
| `achievement_unlocked` | Achievement earned | Celebration email |
| `inactive_3_days` | No activity for 3 days | Re-engagement nudge |
| `inactive_7_days` | No activity for 7 days | "We miss you" email |
| `path_completed` | Finish entire path | Congratulations + certificate |
| `streak_milestone` | Hit 7/30/100 day streak | Streak celebration |

### Example Campaign: Welcome Series

**Campaign:** `soulfra_welcome`

**Message 1 (Immediate):**
```
Subject: Welcome to Soulfra Infrastructure Mastery! ğŸ—ï¸
Body:
Hey {{user.firstName}},

You're about to master infrastructure-as-code with Soulfra's spiritual approach to DevOps.

Your first lesson is ready: "Introduction to Infrastructure as Code"

[Start Lesson] â†’ tracks click

You've got this! ğŸš€
- The Soulfra Team
```

**Message 2 (+24 hours if no activity):**
```
Subject: Your infrastructure journey awaits...
Body:
{{user.firstName}}, we noticed you haven't started yet.

No pressure! But when you're ready, we'll be here.

Quick reminder: The sooner you start, the sooner you level up.

[Continue to Lesson 1]

Streak: 0 days | XP: 0 | Level: 0
```

**Message 3 (+48 hours if no activity):**
```
Subject: Last chance to claim your spot
Body:
{{user.firstName}},

We're holding your spot in Soulfra Infrastructure Mastery, but only for 24 more hours.

After that, you'll need to re-enroll.

[Claim My Spot]

P.S. Did you know 93% of students who complete Lesson 1 finish the entire path?
```

### Creating Campaigns

```bash
# Via database (for now)
INSERT INTO drip_campaigns (
  campaign_name, description, trigger_event, channel, delay_minutes, active
) VALUES (
  'Soulfra Welcome',
  'Welcome series for new Soulfra students',
  'user_enrolled',
  'email',
  0,
  true
);

# Then add messages
INSERT INTO drip_messages (
  campaign_id, sequence_number, message_subject, message_body, delay_minutes
) VALUES (
  'campaign-uuid',
  1,
  'Welcome to Soulfra Infrastructure Mastery! ğŸ—ï¸',
  '<html>Email body with {{user.firstName}} template...</html>',
  0
);
```

### Template Variables

```
{{user.id}}
{{user.firstName}}
{{user.lastName}}
{{user.email}}
{{campaign.name}}
{{lesson.title}}         (when triggered by lesson_completed)
{{achievement.name}}     (when triggered by achievement_unlocked)
{{streak.days}}          (when triggered by streak_milestone)
```

---

## ğŸ“Š API Reference

### Learning Paths

**GET** `/api/learning/paths`
Get all learning paths

**GET** `/api/learning/paths/:pathSlug`
Get specific path with lessons

### Enrollment & Progress

**POST** `/api/learning/enroll`
Enroll user in a path
Body: `{ userId, pathSlug }`

**GET** `/api/learning/progress/:userId/:pathSlug`
Get user's progress

**GET** `/api/learning/next-lesson/:userId/:pathSlug`
Get next available lesson

**POST** `/api/learning/complete-lesson`
Complete a lesson
Body: `{ userId, lessonId, score, timeSpentMinutes }`

### Achievements

**GET** `/api/learning/achievements/:userId`
Get user's achievements

### Leaderboards

**GET** `/api/learning/leaderboard/:pathSlug?limit=10`
Get path-specific leaderboard

**GET** `/api/learning/leaderboard/global?limit=10`
Get global leaderboard

### Mini-Games

**GET** `/api/learning/mini-game/today/:pathSlug`
Get today's game

**POST** `/api/learning/mini-game/attempt`
Submit game attempt
Body: `{ userId, gameId, attemptData }`

**GET** `/api/learning/mini-game/stats/:gameId`
Get game statistics

**GET** `/api/learning/mini-game/history/:userId?limit=10`
Get user's game history

### Drip Campaigns

**GET** `/api/drip/track/open/:sendId`
Track email open (pixel)

**GET** `/api/drip/track/click/:sendId?url=...`
Track link click and redirect

**POST** `/api/drip/unsubscribe`
Unsubscribe from all campaigns
Body: `{ userId }`

### Collaborative Hints

**POST** `/api/learning/hints`
Leave a hint for other students
Body: `{ userId, lessonId, hintText, hintType, spoilerLevel }`

**GET** `/api/learning/hints/:lessonId`
Get hints for a lesson
Query params: `?limit=10`

**POST** `/api/learning/hints/:hintId/rate`
Rate a hint (upvote/downvote)
Body: `{ userId, rating, reason }` (rating: 1 or -1)

**GET** `/api/learning/hints/leaderboard`
Get hint leaderboard (most helpful hint-givers)
Query params: `?limit=10`

**GET** `/api/learning/hints/user/:userId`
Get user's hint stats and recent hints

### Admin

**POST** `/api/learning/admin/generate-daily-games`
Generate today's mini-games

**POST** `/api/learning/admin/process-drip-sends`
Process pending drip emails

**GET** `/api/learning/admin/campaign-analytics/:campaignId`
Get campaign stats

---

## ğŸ¨ Frontend Integration

### Example: Landing Page for soulfra.com

```html
<!DOCTYPE html>
<html>
<head>
  <title>Soulfra Infrastructure Mastery ğŸ—ï¸</title>
</head>
<body>
  <hero>
    <h1>Master Infrastructure-as-Code</h1>
    <p>Learn DevOps with Soulfra's spiritual approach</p>
    <button onclick="enroll()">Start Learning (Free)</button>
  </hero>

  <curriculum>
    <h2>What You'll Learn</h2>
    <ul id="lessons"></ul>
  </curriculum>

  <leaderboard>
    <h2>Top Students</h2>
    <ol id="leaderboard"></ol>
  </leaderboard>

  <script>
    async function enroll() {
      const userId = prompt('Enter your user ID:'); // Replace with real auth
      const res = await fetch('/api/learning/enroll', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          userId,
          pathSlug: 'soulfra-mastery'
        })
      });
      const data = await res.json();
      alert(data.message);
      window.location.href = `/learn/soulfra-mastery/${userId}`;
    }

    // Load lessons
    fetch('/api/learning/paths/soulfra-mastery')
      .then(r => r.json())
      .then(data => {
        const list = document.getElementById('lessons');
        data.lessons.forEach(l => {
          const li = document.createElement('li');
          li.textContent = `${l.lesson_number}. ${l.lesson_title} (${l.xp_reward} XP)`;
          list.appendChild(li);
        });
      });

    // Load leaderboard
    fetch('/api/learning/leaderboard/soulfra-mastery?limit=10')
      .then(r => r.json())
      .then(data => {
        const board = document.getElementById('leaderboard');
        data.leaderboard.forEach(u => {
          const li = document.createElement('li');
          li.textContent = `${u.user_id} - Level ${u.current_level} (${u.total_xp} XP)`;
          board.appendChild(li);
        });
      });
  </script>
</body>
</html>
```

---

## ğŸ§ª Testing

### 1. Test Enrollment
```bash
curl -X POST http://localhost:5001/api/learning/enroll \
  -H "Content-Type: application/json" \
  -d '{"userId": "test_user", "pathSlug": "soulfra-mastery"}'
```

### 2. Test Lesson Completion
```bash
# Get next lesson
curl http://localhost:5001/api/learning/next-lesson/test_user/soulfra-mastery

# Complete it
curl -X POST http://localhost:5001/api/learning/complete-lesson \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "test_user",
    "lessonId": "lesson-uuid-from-above",
    "score": 95,
    "timeSpentMinutes": 12
  }'
```

### 3. Test Mini-Game
```bash
# Get today's game
curl http://localhost:5001/api/learning/mini-game/today/soulfra-mastery

# Attempt it
curl -X POST http://localhost:5001/api/learning/mini-game/attempt \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "test_user",
    "gameId": "game-uuid-from-above",
    "attemptData": { "guess": "CACHE" }
  }'
```

### 4. Generate Daily Games
```bash
curl -X POST http://localhost:5001/api/learning/admin/generate-daily-games
```

### 5. Check Leaderboard
```bash
curl http://localhost:5001/api/learning/leaderboard/soulfra-mastery?limit=10
```

### 6. Test Collaborative Hints
```bash
# Leave a hint
curl -X POST http://localhost:5001/api/learning/hints \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "test_user",
    "lessonId": "lesson-uuid-from-above",
    "hintText": "ğŸ”¥ Think about l33ding zer0s in ZIP c0d3s ğŸ—ºï¸",
    "hintType": "cryptic",
    "spoilerLevel": 2
  }'

# Get hints for lesson
curl http://localhost:5001/api/learning/hints/lesson-uuid-from-above?limit=10

# Rate a hint (upvote)
curl -X POST http://localhost:5001/api/learning/hints/hint-uuid/rate \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "test_user_2",
    "rating": 1,
    "reason": "helpful"
  }'

# Check hint leaderboard
curl http://localhost:5001/api/learning/hints/leaderboard?limit=10

# Get user's hint stats
curl http://localhost:5001/api/learning/hints/user/test_user
```

### 7. Test Data Literacy Games
```bash
# Get today's data cleaner game
curl http://localhost:5001/api/learning/mini-game/today/data-liberation

# Expected response:
{
  "game_type": "data_cleaner",
  "game_title": "Data Cleaner: Fix the Mess",
  "game_data": {
    "messy": ["2134", "5551234567", "123 main st", "JOHN DOE", "User@Example.COM"],
    "cleaned": ["02134", "(555) 123-4567", "123 Main Street", "John Doe", "user@example.com"],
    "rules": ["Add leading zeros to ZIP codes", "Format phone numbers", ...]
  }
}

# Attempt the game
curl -X POST http://localhost:5001/api/learning/mini-game/attempt \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "test_user",
    "gameId": "game-uuid-from-above",
    "attemptData": {
      "cleanedRecords": [
        "02134",
        "(555) 123-4567",
        "123 Main Street",
        "John Doe",
        "user@example.com"
      ]
    }
  }'
```

---

## ğŸ”§ Customization

### Add New Learning Path

1. Add domain to `domain_portfolio` table
2. Add config to `scripts/seed-learning-paths.js`
3. Run: `node scripts/seed-learning-paths.js`

### Add New Achievement

```sql
INSERT INTO achievements (
  achievement_slug, achievement_name, achievement_description,
  badge_icon, rarity, xp_reward
) VALUES (
  'fast_learner',
  'Fast Learner',
  'Complete 3 lessons in one day',
  'âš¡',
  'uncommon',
  150
);
```

### Add New Mini-Game Type

1. Edit `lib/mini-game-generator.js`
2. Add game type to `this.gameTypes` array
3. Implement `generate{GameType}()` method
4. Update `validateMiniGameAttempt()` for validation

### Customize Drip Campaign Timing

```sql
-- Speed up welcome series
UPDATE drip_messages
SET delay_minutes = 60  -- 1 hour instead of 24
WHERE campaign_id = 'welcome-campaign-uuid'
  AND sequence_number = 2;
```

---

## ğŸš€ Production Checklist

- [ ] Run migrations/020_learning_platform.sql
- [ ] Run migrations/021_add_data_literacy_features.sql (new!)
- [ ] Seed learning paths: `node scripts/seed-learning-paths.js`
- [ ] Configure email provider (SendGrid/Mailgun)
- [ ] Setup Twilio for SMS (optional)
- [ ] Wire learning routes into router.js
- [ ] Setup cron jobs for daily games and drip sends
- [ ] Create landing pages for each of 12 domains
- [ ] Add authentication middleware to API routes
- [ ] Setup monitoring for drip campaign delivery
- [ ] Configure DNS for email sending domain
- [ ] Test all 12 learning paths (especially deathtodata.com with new data literacy lessons)
- [ ] Test collaborative hint system
- [ ] Load test with 1000+ concurrent users

---

## ğŸ“š Related Documentation

- `TRIANGLE_CONSENSUS_SYSTEM.md` - How AI-generated content works
- `HYBRID_BYOK_GUIDE.md` - API key management
- `migrations/020_learning_platform.sql` - Database schema
- `lib/learning-engine.js` - Core learning logic
- `lib/mini-game-generator.js` - Mini-game generation
- `lib/drip-campaign-manager.js` - Email/SMS automation
- `routes/learning-routes.js` - API endpoints

---

## ğŸ‰ Success!

You now have a fully operational CryptoZombies-style learning platform across 12 branded domains!

**What You Built:**
- 12 progressive learning paths (111 total lessons, including 15 data literacy lessons)
- XP, levels, streaks, and achievements
- Daily AI-generated mini-games (10 types: 5 classic + 5 data literacy)
- Collaborative hint system with emojis, leet speak, and cryptic clues
- Automated drip campaigns for onboarding
- Leaderboards and competition
- RESTful API for all operations

**Next Steps:**
1. Build frontend lesson viewer
2. Create domain-specific landing pages
3. Launch first path (maybe soulfra.com?)
4. Iterate based on user feedback

**The learning revolution starts now.** ğŸš€
