# Voice Onboarding Auth System

**Login IS the Questionnaire. Questionnaire IS Brand Building.**

A revolutionary authentication system that replaces traditional OAuth/passkey complexity with a progressive 10-question voice interview. Users build their brand strategy, discover their archetype, and get matched to easter hunt opportunities‚Äîall while logging in.

---

## üéØ Core Concept

Instead of clicking "Sign in with Twitter" or scanning a passkey, users:

1. **Record voice answers** to 10 progressive questions (5yo ‚Üí Enterprise)
2. **Build brand strategy** from their answers (values, target audience, differentiation)
3. **Discover archetype** (Creator, Visionary, Analyst, Maverick, etc.)
4. **Get matched** to easter hunt opportunities (bounties, equity, projects)
5. **Earn $175** for completing the full questionnaire
6. **Authenticate** using voice biometric signature

**Result:** Authentication becomes an engaging experience that simultaneously:
- Eliminates OAuth/passkey friction
- Teaches users to think like founders
- Identifies top talent for hiring
- Builds brand strategy from first principles
- Creates psychological investment in the platform

---

## üìä Progressive Question Structure

### Level 1: 5 Years Old (Simple)

**Question 1** - *"What's your name and what do you want to build?"* ($5)
- **Duration:** 5-15 seconds
- **Category:** Identity
- **Extracts:** Name, project idea, enthusiasm
- **Detects:** Creator, Visionary, Analyst archetypes

**Question 2** - *"Who do you want to help?"* ($10)
- **Duration:** 5-20 seconds
- **Category:** Identity
- **Extracts:** Target audience, empathy, scope
- **Detects:** Caregiver, Connector, Explorer archetypes

### Level 2: 10 Years Old (Getting Specific)

**Question 3** - *"What problem are you solving?"* ($15)
- **Duration:** 10-30 seconds
- **Category:** Problem
- **Extracts:** Problem clarity, pain points, urgency
- **Detects:** Analyst, Visionary, Maverick archetypes

**Question 4** - *"Why does this problem matter?"* ($20)
- **Duration:** 10-30 seconds
- **Category:** Problem
- **Extracts:** Impact, motivation, conviction
- **Detects:** Caregiver, Visionary, Sage archetypes

### Level 3: 10 Years Old (Values)

**Question 5** - *"What values are important to you?"* ($25)
- **Duration:** 10-30 seconds
- **Category:** Values
- **Extracts:** Core principles, ethics, philosophy
- **Detects:** Sage, Maverick, Caregiver archetypes

### Level 4: 15 Years Old (Business Thinking)

**Question 6** - *"How will you make money?"* ($30)
- **Duration:** 15-45 seconds
- **Category:** Business
- **Extracts:** Revenue model, pricing, monetization
- **Detects:** Analyst, Creator, Connector archetypes

**Question 7** - *"What makes you different from competitors?"* ($30)
- **Duration:** 15-45 seconds
- **Category:** Business
- **Extracts:** Unique value prop, competitive advantage
- **Detects:** Visionary, Maverick, Explorer archetypes

### Level 5: Enterprise (Strategic Thinking)

**Question 8** - *"Describe your go-to-market strategy"* ($25)
- **Duration:** 20-60 seconds
- **Category:** Business
- **Extracts:** Customer acquisition, distribution, channels
- **Detects:** Analyst, Connector, Creator archetypes

**Question 9** - *"What are your 1-year and 5-year goals?"* ($10)
- **Duration:** 20-60 seconds
- **Category:** Vision
- **Extracts:** Milestones, ambition, planning
- **Detects:** Visionary, Explorer, Sage archetypes

**Question 10** - *"Why will this matter in 10 years?"* ($5)
- **Duration:** 15-60 seconds
- **Category:** Vision
- **Extracts:** Legacy, long-term impact, mission
- **Detects:** Visionary, Sage, Explorer archetypes

**Total Reward:** $175.00

---

## üé≠ 8 Personality Archetypes

The system analyzes voice responses to detect which archetype best matches the user:

### 1. **The Creator** üé®
- **Keywords:** build, create, make, design, craft, develop
- **Traits:** Hands-on, builder mindset, loves making things real
- **Brand Domains:** calriven.com (AI/automation), calos.ai (tools)
- **Easter Hunts:** AI Agent Builder, Lofi Streaming Engine, Gmail Webhook System

### 2. **The Visionary** üöÄ
- **Keywords:** future, change the world, revolutionize, transform, pioneer
- **Traits:** Big-picture thinker, inspirational, forward-looking
- **Brand Domains:** soulfra.com (privacy), calriven.com (AI)
- **Easter Hunts:** Privacy Guardian Project, Platform Ecosystem

### 3. **The Analyst** üìä
- **Keywords:** optimize, data, metrics, analyze, efficient, solve
- **Traits:** Logical, data-driven, process-oriented
- **Brand Domains:** deathtodata.com (data analysis), calriven.com (AI)
- **Easter Hunts:** Data Broker Hunter, Cost Analytics Dashboard

### 4. **The Maverick** üí•
- **Keywords:** disrupt, challenge, rebel, different, freedom, break
- **Traits:** Rule-breaker, anti-establishment, independent
- **Brand Domains:** soulfra.com (privacy), deathtodata.com (anti-tracking)
- **Easter Hunts:** Privacy Guardian, Data Broker Hunter, Ad Blocker

### 5. **The Caregiver** üíö
- **Keywords:** help, support, care, protect, serve, community
- **Traits:** Empathetic, service-oriented, nurturing
- **Brand Domains:** soulfra.com (protecting users), calos.ai (community tools)
- **Easter Hunts:** Guardian Bug Reports, Community Moderation Tools

### 6. **The Connector** üåê
- **Keywords:** people, community, network, platform, connect, together
- **Traits:** Social, collaborative, relationship-focused
- **Brand Domains:** calos.ai (community), soulfra.com (social privacy)
- **Easter Hunts:** Forum System, Federation Protocol, Social Graph

### 7. **The Explorer** üß≠
- **Keywords:** discover, expand, frontier, pioneer, new, adventure
- **Traits:** Curious, experimental, boundary-pushing
- **Brand Domains:** calriven.com (AI research), calos.ai (experiments)
- **Easter Hunts:** Model Discovery System, Feature Experiments

### 8. **The Sage** üìö
- **Keywords:** truth, wisdom, learning, understand, teach, master
- **Traits:** Knowledge-seeking, thoughtful, educational
- **Brand Domains:** calos.ai (learning), soulfra.com (transparency)
- **Easter Hunts:** Documentation Registry, Learning Platform, Knowledge Graph

---

## üè¢ Brand Domain Routing

Based on keywords in voice answers, users are routed to the most relevant brand domain:

### soulfra.com - Privacy & Freedom
**Keywords:** privacy, security, surveillance, tracking, freedom, rights, autonomy, consent, spying, Big Brother

**Ideal for:** Mavericks, Caregivers, Visionaries who want to protect individual rights

**Sample Projects:**
- Privacy Guardian browser extension
- Zero-knowledge authentication
- Local-first data storage
- Surveillance tracker blocker

### deathtodata.com - Data Broker Destruction
**Keywords:** data broker, opt out, selling data, identity theft, credit reports, personal information

**Ideal for:** Analysts, Mavericks who want to fight data exploitation

**Sample Projects:**
- Automated opt-out requests
- Data broker hunter
- Credit monitoring alerts
- Identity resolution tools

### calriven.com - AI & Automation
**Keywords:** ai, machine learning, automation, agents, robots, models, algorithms, neural networks

**Ideal for:** Creators, Analysts, Visionaries building AI systems

**Sample Projects:**
- AI agent orchestrator (Cal)
- Multi-model router
- Training task system
- Model benchmarking

### calos.ai - Platform & Community
**Keywords:** platform, community, users, developers, api, tools, ecosystem

**Ideal for:** Connectors, Explorers, Sages building platform infrastructure

**Sample Projects:**
- Community acquisition
- Learning platform
- Documentation system
- Developer tools

---

## üéÅ Easter Hunt Matching

After completing the questionnaire, users are matched to "easter hunt" opportunities‚Äîbounties, projects, and equity offers based on their:

- **Detected archetype** (e.g., Creators matched to building challenges)
- **Interest keywords** (e.g., "ai" ‚Üí AI Agent Builder Challenge)
- **Brand domain** (e.g., privacy ‚Üí Privacy Guardian Project)
- **Skill signals** (extracted from how they describe technical concepts)

### Example Easter Hunts

**AI Agent Builder Challenge** - $500 bounty
- **Domain:** calriven.com
- **Required Archetypes:** Creator, Analyst
- **Required Keywords:** ai, automation, agents
- **Required Skills:** Python, Node.js
- **Commitment:** 10 hours/week
- **Difficulty:** Intermediate

**Privacy Guardian Project** - $750 bounty
- **Domain:** soulfra.com
- **Required Archetypes:** Maverick, Creator
- **Required Keywords:** privacy, security, tracking
- **Required Skills:** JavaScript, Chrome Extension
- **Commitment:** 15 hours/week
- **Difficulty:** Advanced

**Data Broker Hunter** - $1000 bounty
- **Domain:** deathtodata.com
- **Required Archetypes:** Maverick, Analyst
- **Required Keywords:** data broker, opt out, automation
- **Required Skills:** Python, web scraping
- **Commitment:** 20 hours/week
- **Difficulty:** Advanced

---

## üîä Voice Analysis Pipeline

Each voice answer goes through a sophisticated analysis pipeline:

### 1. Transcription (Whisper API)
```javascript
const transcription = await openai.audio.transcriptions.create({
  file: audioFile,
  model: 'whisper-1',
  language: 'en',
  response_format: 'json'
});
```

### 2. Keyword Extraction
```javascript
const keywords = this.extractKeywords(transcript);
// ['ai', 'automation', 'privacy', 'data', 'users', 'security']
```

### 3. Sentiment Analysis
```javascript
const sentiment = this.analyzeSentiment(transcript);
// 'positive', 'passionate', 'analytical', 'concerned'
```

### 4. Archetype Detection
```javascript
const archetypeScores = {
  creator: 15,   // High: "build", "create", "make"
  visionary: 8,  // Medium: "future", "change"
  analyst: 5,    // Low: "optimize", "metrics"
  // ... other archetypes
};
```

### 5. Brand Domain Hints
```javascript
const brandDomainHints = ['soulfra.com', 'deathtodata.com'];
// Detected from: privacy, security, tracking keywords
```

### 6. Voice Biometric (Future)
```javascript
const voiceSignature = crypto.createHash('sha256')
  .update(transcript + audioMetadata)
  .digest('hex');
// Currently using transcript hash as placeholder
```

---

## üì° API Reference

### Start Session
```bash
POST /api/voice-onboarding/start
Content-Type: application/json

{
  "email": "user@example.com",
  "username": "optional_username"
}
```

**Response:**
```json
{
  "sessionId": "abc123",
  "currentQuestion": {
    "id": 1,
    "level": 1,
    "ageLevel": "5 years old",
    "text": "What's your name and what do you want to build?",
    "guidance": "Just tell me your name and what cool thing you want to make!",
    "minDuration": 5,
    "maxDuration": 15,
    "reward": 5.00,
    "category": "identity"
  },
  "totalQuestions": 10,
  "status": "started"
}
```

### Submit Answer
```bash
POST /api/voice-onboarding/answer
Content-Type: multipart/form-data

audio: (audio file - webm, mp3, wav)
sessionId: abc123
questionId: 1
```

**Response:**
```json
{
  "transcript": "Hi, I'm John and I want to build an AI assistant that helps people protect their privacy online.",
  "analysis": {
    "keywords": ["ai", "privacy", "protect", "assistant", "online"],
    "sentiment": "passionate",
    "archetypeSignals": {
      "creator": ["build"],
      "caregiver": ["help", "protect"]
    },
    "brandDomainHints": ["soulfra.com", "calriven.com"]
  },
  "reward": 5.00,
  "nextQuestion": { "id": 2, ... },
  "progress": {
    "completed": 1,
    "total": 10,
    "percentage": 10
  },
  "session": {
    "detectedArchetype": "creator",
    "totalReward": 5.00
  }
}
```

### Get Session Status
```bash
GET /api/voice-onboarding/session/:sessionId
```

**Response:**
```json
{
  "sessionId": "abc123",
  "email": "user@example.com",
  "currentQuestion": 3,
  "questionsCompleted": 2,
  "totalReward": 15.00,
  "detectedArchetype": "creator",
  "detectedBrandDomain": "soulfra.com",
  "interestKeywords": ["ai", "privacy", "security", "users"],
  "easterHuntMatches": [
    {
      "hunt": "Privacy Guardian Project",
      "matchScore": 85,
      "bounty": 750.00
    }
  ],
  "status": "active",
  "progress": {
    "completed": 2,
    "total": 10,
    "percentage": 20
  }
}
```

### Get All Questions
```bash
GET /api/voice-onboarding/questions
```

**Response:**
```json
{
  "questions": [ /* 10 questions */ ],
  "totalReward": 175.00,
  "totalQuestions": 10
}
```

### Get Leaderboard
```bash
GET /api/voice-onboarding/leaderboard?limit=50
```

**Response:**
```json
{
  "leaderboard": [
    {
      "username": "john",
      "archetype": "creator",
      "reward": 175.00,
      "completionPercentage": 100,
      "avgQuality": 85,
      "completedAt": "2025-01-15T10:30:00Z"
    }
  ]
}
```

### Get Analytics
```bash
GET /api/voice-onboarding/analytics
```

**Response:**
```json
{
  "totalSessions": 150,
  "completedSessions": 45,
  "activeSessions": 23,
  "abandonedSessions": 82,
  "totalRewardsEarned": 7875.00,
  "avgRewardPerSession": 52.50,
  "archetypeDistribution": {
    "creator": 15,
    "visionary": 8,
    "analyst": 12,
    "maverick": 5,
    "caregiver": 3,
    "connector": 1,
    "explorer": 1,
    "sage": 0
  },
  "domainDistribution": {
    "soulfra.com": 18,
    "deathtodata.com": 7,
    "calriven.com": 12,
    "calos.ai": 8
  }
}
```

### Get Easter Hunts
```bash
GET /api/voice-onboarding/easter-hunts?archetype=creator&domain=calriven.com&status=active
```

**Response:**
```json
{
  "opportunities": [
    {
      "huntId": "ai-agent-builder",
      "name": "AI Agent Builder Challenge",
      "description": "Build autonomous AI agents for Cal orchestrator",
      "domain": "calriven.com",
      "requiredArchetypes": ["creator", "analyst"],
      "requiredKeywords": ["ai", "automation", "agents"],
      "requiredSkills": ["python", "nodejs"],
      "bounty": 500.00,
      "difficulty": "intermediate",
      "timeCommitment": "10 hours/week",
      "slotsAvailable": 3
    }
  ]
}
```

---

## üé® Frontend UI

The voice login interface at `/voice-login.html` features:

### Progressive Disclosure
- Shows current question with level badge and reward
- Animated progress bar (0% ‚Üí 100%)
- Real-time stats (questions completed, money earned, progress %)

### Voice Recording
- One-click record/stop button
- Visual waveform animation while recording
- Timer showing elapsed time (0:00 ‚Üí max duration)
- Auto-stop at max duration
- Transcript display after processing

### Beautiful Design
- Glassmorphic cards with backdrop blur
- Gradient backgrounds (purple/blue theme)
- Smooth animations and transitions
- Mobile-responsive layout
- Accessible keyboard navigation

### Completion Screen
- Celebration animation üéâ
- Displays detected archetype badge
- Shows final stats (10 questions, $175 earned, domain)
- "Go to Dashboard" button

---

## üóÑÔ∏è Database Schema

### voice_onboarding_sessions
Tracks each user's voice onboarding journey

```sql
CREATE TABLE voice_onboarding_sessions (
  id SERIAL PRIMARY KEY,
  session_id VARCHAR(255) UNIQUE,
  email VARCHAR(255),
  username VARCHAR(100),
  current_question INTEGER DEFAULT 1,
  questions_completed INTEGER DEFAULT 0,
  detected_archetype VARCHAR(50),
  archetype_scores JSONB DEFAULT '{}',
  detected_brand_domain VARCHAR(255),
  interest_keywords TEXT[],
  easter_hunt_matches JSONB DEFAULT '[]',
  voice_signature TEXT,
  total_reward NUMERIC(10, 2) DEFAULT 0.00,
  payout_status VARCHAR(50) DEFAULT 'pending',
  status VARCHAR(50) DEFAULT 'active',
  completion_percentage INTEGER DEFAULT 0,
  started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  completed_at TIMESTAMP
);
```

### voice_onboarding_answers
Stores individual voice answers with transcripts and analysis

```sql
CREATE TABLE voice_onboarding_answers (
  id SERIAL PRIMARY KEY,
  session_id VARCHAR(255),
  question_id INTEGER,
  question_level INTEGER,
  question_text TEXT,
  audio_path TEXT,
  duration_seconds NUMERIC(5, 2),
  transcript TEXT,
  confidence_score NUMERIC(5, 2),
  analysis JSONB,
  quality_score INTEGER,
  reward NUMERIC(10, 2),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### voice_onboarding_questions
Defines the 10 progressive questions (pre-seeded)

```sql
CREATE TABLE voice_onboarding_questions (
  id SERIAL PRIMARY KEY,
  question_id INTEGER UNIQUE,
  level INTEGER,
  age_level VARCHAR(50),
  question_text TEXT,
  guidance_text TEXT,
  min_duration INTEGER DEFAULT 5,
  max_duration INTEGER DEFAULT 60,
  reward NUMERIC(10, 2),
  category VARCHAR(100),
  archetype_signals JSONB DEFAULT '{}',
  brand_domain_signals JSONB DEFAULT '{}'
);
```

### easter_hunt_opportunities
Defines available opportunities for matching

```sql
CREATE TABLE easter_hunt_opportunities (
  id SERIAL PRIMARY KEY,
  hunt_id VARCHAR(100) UNIQUE,
  name VARCHAR(255),
  description TEXT,
  domain VARCHAR(255),
  required_archetypes TEXT[],
  required_keywords TEXT[],
  required_skills TEXT[],
  bounty NUMERIC(10, 2),
  equity_percentage NUMERIC(5, 2),
  status VARCHAR(50) DEFAULT 'active',
  slots_available INTEGER DEFAULT 1,
  difficulty VARCHAR(50),
  time_commitment VARCHAR(100)
);
```

### easter_hunt_matches
Tracks matches between users and opportunities

```sql
CREATE TABLE easter_hunt_matches (
  id SERIAL PRIMARY KEY,
  session_id VARCHAR(255),
  hunt_id VARCHAR(100),
  match_score INTEGER,
  match_reasons TEXT[],
  status VARCHAR(50) DEFAULT 'suggested'
);
```

---

## üöÄ Getting Started

### 1. Run Database Migration

```bash
psql -U matthewmauer -d calos -f database/migrations/142_voice_onboarding_auth.sql
```

This creates:
- All voice onboarding tables
- Pre-seeds 10 questions with rewards
- Pre-seeds 5 easter hunt opportunities
- Creates analytics views

### 2. Start Server

```bash
npm start
```

Server starts on port 5001 with voice onboarding routes at `/api/voice-onboarding/*`

### 3. Open Voice Login

```
http://localhost:5001/voice-login.html
```

### 4. Test the Flow

1. Click "Start Recording" for Question 1
2. Speak your answer (5-15 seconds)
3. Click "Stop Recording"
4. View transcript and analysis
5. Click "Submit Answer"
6. Repeat for all 10 questions
7. View completion screen with archetype and matches

---

## üí° Why This Works

### Psychology
- **Investment:** Users spend 5-10 minutes building their brand strategy
- **Gamification:** Progressive levels (5yo ‚Üí Enterprise) feel like achievement
- **Reward:** $175 payment creates strong motivation to complete
- **Identity:** Discovering archetype creates emotional connection
- **Opportunity:** Easter hunt matches provide clear next steps

### Technical
- **Friction Removal:** No OAuth redirects, no password managers
- **Data Quality:** 10 voice answers = rich user data for matching
- **Voice Biometric:** Future authentication uses voice signature
- **Progressive Disclosure:** Complexity increases gradually (5yo ‚Üí Enterprise)
- **Multi-Purpose:** One flow handles auth + onboarding + hiring + brand building

### Business
- **Talent Identification:** Automatically finds best candidates for projects
- **Brand Strategy:** Users build their own positioning/differentiation
- **Community Investment:** Completing questionnaire = commitment to platform
- **Viral Potential:** "I earned $175 just by talking about my startup idea"
- **Quality Filter:** Only serious users will complete all 10 questions

---

## üîÆ Future Enhancements

### Voice Biometric Authentication
Replace transcript hash with real voice embeddings:
```javascript
const voiceEmbedding = await extractVoiceEmbedding(audioBuffer);
// Store as JSONB array: [0.123, 0.456, 0.789, ...]
// Compare with cosine similarity for future logins
```

### Real-Time Archetype Detection
Show archetype score bars updating in real-time as user answers questions

### Brand Strategy Export
Generate PDF/slide deck with:
- Detected archetype
- Brand positioning statement
- Target audience
- Unique value proposition
- Go-to-market strategy
- Matched easter hunt opportunities

### Voice-to-Blog Post
Automatically publish voice answers as blog post:
```
Title: "My Startup Journey: From 5 Years Old to Enterprise"
Sections: 10 questions as headers, transcripts as content
```

### Federated Authentication
Allow other platforms to use CALOS voice auth:
```javascript
// OAuth flow but with voice questionnaire instead of "Sign in" button
const session = await calos.voiceAuth.authenticate(redirectUri);
```

---

## üìö Related Systems

This voice onboarding auth system integrates with:

- **Daily Voice Journal** (`DAILY_VOICE_JOURNAL.md`) - Same transcription engine
- **Onboarding Survey** (`database/migrations/008_add_onboarding_system.sql`) - Similar reward structure
- **Easter Hunt Matching** - Connects to recruiting/bounty system
- **Multi-Brand Orchestrator** (`lib/multi-brand-orchestrator.js`) - Domain routing
- **Auth Systems** (`lib/biometric-auth.js`, `lib/social-auth.js`) - Can replace traditional auth

---

## üéØ Success Metrics

Track these KPIs to measure system effectiveness:

1. **Completion Rate** - % of users who finish all 10 questions
2. **Avg Time to Complete** - How long full questionnaire takes
3. **Archetype Distribution** - Which archetypes are most common
4. **Domain Distribution** - Which domains attract most users
5. **Easter Hunt Match Quality** - % of matches that convert to applications
6. **Payout Velocity** - Time from completion to payment
7. **Voice Quality Score** - Avg quality of voice answers (depth/thoughtfulness)
8. **Abandonment Point** - Which question causes most dropouts

---

**Built with ‚ù§Ô∏è by CALOS**

*Where authentication meets brand building, personality discovery, and talent matching.*

Visit: http://localhost:5001/voice-login.html
